Bootstrap: docker
From: ubuntu:latest

%labels
MAINTAINER sebastien.gardoll@ipsl.fr

%post

  apt-get -y update
  apt-get -y dist-upgrade
  apt-get -y install myproxy firefox python2.7-dev libssl-dev libxml2-dev libxslt-dev globus-gass-copy-progs wget

  ln -s /usr/bin/python2.7  /usr/bin/python2
  ln -s /usr/bin/python2.7  /usr/bin/python

  wget https://bootstrap.pypa.io/get-pip.py -O /tmp/get-pip.py

  python2.7 /tmp/get-pip.py

  pip install -U nose pyopenssl MyProxyClient selenium requests nose-testconfig nose-htmloutput rednose lxml

  wget https://github.com/mozilla/geckodriver/releases/download/v0.19.1/geckodriver-v0.19.1-linux64.tar.gz -O /tmp/geckodriver-v0.19.1-linux64.tar.gz

  tar -xzvf /tmp/geckodriver-v0.19.1-linux64.tar.gz -C /usr/local/bin
  
  rm /tmp/get-pip.py
  rm /tmp/geckodriver-v0.19.1-linux64.tar.gz

  apt-get remove -y wget

  apt-get clean